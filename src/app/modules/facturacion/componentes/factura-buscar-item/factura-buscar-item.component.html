<div class="input-group w-full">
  <button
    class="btn btn-input cursor-pointer"
    type="button"
    [ngClass]="{ 'btn-primary': tipoBusqueda() === 'nombre' }"
    (click)="seleccionarTipoBusqueda('nombre')"
  >
    <i
      class="ki-outline ki-filter-search"
      [ngClass]="{ 'text-white': tipoBusqueda() === 'nombre' }"
    ></i>
  </button>
  <button
    class="btn btn-input cursor-pointer"
    type="button"
    [ngClass]="{ 'btn-primary': tipoBusqueda() === 'codigo' }"
    (click)="seleccionarTipoBusqueda('codigo')"
  >
    <i
      class="ki-outline ki-barcode"
      [ngClass]="{ 'text-white': tipoBusqueda() === 'codigo' }"
    ></i>
  </button>
  <div class="input">
    <input
      #campoBusqueda
      placeholder="Right icon"
      type="text"
      (input)="buscarCampo()"
      [(ngModel)]="inputBusqueda"
      [placeholder]="
        tipoBusqueda() === 'nombre'
          ? 'Buscar por nombre'
          : 'Buscar por código barras'
      "
    />
    @if (campoBusqueda.value !== "") {
      <button class="btn btn-icon" (click)="limpiarBusqueda()">
        <i class="ki-outline ki-cross text-red-500"> </i>
      </button>
    }
  </div>
  <span
    class="btn btn-input cursor-pointer"
    #triggerElemento
    (click)="abrirModal('formularioNuevoItem')"
  >
    <i class="ki-outline ki-add-files"></i>
  </span>
  <div
    class="modal"
    data-modal="true"
    id="modal_2"
    data-modal-backdrop-static="true"
    #modalFormulario
  >
    <div class="modal-content modal-center-y max-w-[600px]">
      @defer (on interaction(triggerElemento)) {
        <div class="modal-header">
          <h3 class="modal-title">Nuevo ítem</h3>
          <button
            class="btn btn-xs btn-icon btn-light"
            data-modal-dismiss="true"
          >
            <i class="ki-outline ki-cross"> </i>
          </button>
        </div>
        <app-item-modal></app-item-modal>
      }
    </div>
  </div>
</div>

<app-modal-standard
  modalId="formularioNuevoItem"
  title="Nuevo ítem"
  [closeOnOutsideClick]="false"
  [closeOnEsc]="false"
>
  @if (getModalInstaceState("formularioNuevoItem") | async) {
    <app-item-modal (itemSubmitted)="buscarCampo()"></app-item-modal>
  }
</app-modal-standard>

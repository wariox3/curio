<div
  class="card min-h-[280px] cursor-pointer relative transition-all duration-100 ease-in-out"
  [ngClass]="{ 'border-2 border-teal-500/50': cantidadSignal() >= 1 }"
  (click)="seleccionarProducto(item)"
>
  @if (cantidadSignal() >= 1) {
    <span
      class="absolute -top-2 -right-2 bg-teal-500 text-white w-6 h-6 flex items-center justify-center rounded-full"
      [ngClass]="cantidadSignal() > 99 ? 'text-xs' : 'text-sm'"
    >
      {{ cantidadSignal() > 99 ? "99+" : cantidadSignal() }}
    </span>
  }
  <span
    class="absolute -top-0.1 right-5 bg-teal-500 text-white w-7 h-7 flex items-center justify-center rounded-full"
    (click)="seleccionarFavorito(item); $event.stopPropagation()"
  >
    @if (item.favorito) {
      <i class="ki-duotone ki-star text-white"></i>
    } @else {
      <i class="ki-outline ki-star"></i>
    }
  </span>

  <span
    class="absolute -top-0.1 left-1.75 border border-teal-500/50 text-teal-500 bg-gray-50 dark-mode:bg-gray-50 h-7 flex items-center justify-center rounded-s-sm text-sm font-bold px-2"
  >
    {{ item.codigo | truncate: 10 }}
  </span>

  <div class="card-body p-0">
    <img
      [src]="item.imagen || 'https://semantica.sfo3.digitaloceanspaces.com/renio/images/placeholder.jpg'"
      width="18"
      height="18"
      class="rounded-t-[0.70rem] object-fill w-full h-[150px]"
    />
    <div class="text-center">
      <h5 class="text-lg font-light dark-mode:text-gray-500">{{ item.nombre }}</h5>
      <h6 class="text-sm font-light truncate w-full dark-mode:text-gray-500">
        {{ item.disponible || "Agotado" }}
      </h6>
      <p class="text-base font-bold dark-mode:text-gray-500">$ {{ item.precio | number: "1.0-0" }}</p>
    </div>
  </div>
</div>
